"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("@morev/utils"),e=require("vue"),r=(e,r)=>!!r(e)||!!t.isObject(e)&&(2===Object.keys(e).length&&!Object.entries(e).some((([t,e])=>{const o=!["enter","leave"].includes(t),s=!r(e);return o||s}))),o=[0,-16],s={inheritAttrs:!1,props:{duration:{validator:e=>r(e,(e=>t.isInteger(e)&&e>=0)),default:300},easing:{validator:e=>r(e,(e=>t.isString(e)&&""!==e.trim())),default:()=>"cubic-bezier(.25, .8, .5, 1)"},delay:{validator:e=>r(e,(e=>t.isInteger(e)&&e>=0)),default:0},noOpacity:{type:Boolean,default:!1},appear:{type:Boolean,default:!1},mode:{type:String,default:void 0},group:{type:Boolean,default:!1},tag:{type:String,default:"span"},noMove:{type:Boolean,default:!1},moveDuration:{type:Number,default:300}},computed:{cComponent(){return this.group?e.TransitionGroup:e.Transition},cAttrs(){const{appear:t,mode:e,tag:r,duration:o}=this;return this.group?{appear:t,tag:r,duration:o,...this.$attrs}:{appear:t,mode:e,duration:o}},cHooks(){return{beforeEnter:(...t)=>{this.reduceTransition(...t),this.$emit("before-enter",...t)},beforeLeave:(...t)=>{var e;this.reduceTransition(...t),null==(e=this.initLeaving)||e.call(this,...t),this.$emit("before-leave",...t)},enter:(...t)=>{var e;null==(e=this.onEnter)||e.call(this,...t),this.$emit("enter",...t)},leave:(...t)=>{var e;null==(e=this.onLeave)||e.call(this,...t),this.$emit("leave",...t)},afterEnter:(...t)=>{var e;this.resetTransition(...t),null==(e=this.resetElement)||e.call(this,...t),this.$emit("after-enter",...t)},afterLeave:(...t)=>{var e;this.resetTransition(...t),null==(e=this.resetElement)||e.call(this,...t),this.$emit("after-leave",...t)}}}},methods:{setupTransition(t,e="enter"){var r,o,s,i,n,a;const l=null!=(o=null==(r=this.duration)?void 0:r[e])?o:this.duration,p=null!=(i=null==(s=this.easing)?void 0:s[e])?i:this.easing,m=null!=(a=null==(n=this.delay)?void 0:n[e])?a:this.delay;t.style.setProperty("transition-duration",`${l}ms`,"important"),t.style.setProperty("transition-timing-function",`${p}`,"important"),t.style.setProperty("transition-delay",`${m}ms`,"important")},reduceTransition(t){t.style.setProperty("transition-duration","0ms","important"),t.style.setProperty("transition-delay","0ms","important")},resetTransition(t){t.style.removeProperty("transition-duration"),t.style.removeProperty("transition-timing-function"),t.style.removeProperty("transition-delay")},initLeaving(t){if(!this.group||this.noMove)return t;const e=getComputedStyle(t),{width:r,height:o}=e,{marginLeft:s,marginTop:i}=e;return t.style.setProperty("left",t.offsetLeft-parseFloat(s)+"px","important"),t.style.setProperty("top",t.offsetTop-parseFloat(i)+"px","important"),t.style.setProperty("width",`${parseFloat(r)}px`,"important"),t.style.setProperty("height",`${parseFloat(o)}px`,"important"),t.style.setProperty("position","absolute","important"),t},setMoveDuration(){var t;this.group&&this.$el&&(null==(t=this.$el.style)||t.setProperty("--move-duration",`${this.moveDuration}ms`))}},watch:{moveDuration(){this.setMoveDuration()},group(){this.setMoveDuration()}},mounted(){this.setMoveDuration()}},i=(t,e)=>{const r=t.__vccOpts||t;for(const[o,s]of e)r[o]=s;return r};const n=i({name:"transition-expand",mixins:[s],props:{axis:{validator:e=>r(e,(e=>t.isString(e)&&["x","y"].includes(e))),default:"y"}},data:()=>({}),computed:{},methods:{async onEnter(t){await this.$nextTick(),await this.$nextTick(),this.getSizes(t),this.collapseElement(t,"enter"),t.offsetTop,this.setupTransition(t,"enter"),this.expandElement(t,"enter")},onLeave(t){this.getSizes(t),this.expandElement(t,"leave"),t.offsetTop,this.setupTransition(t,"leave"),this.collapseElement(t,"leave")},expandElement(t,e="enter"){var r,o;const s=null!=(o=null==(r=this.axis)?void 0:r[e])?o:this.axis,i="x"===s?"left":"top",n="x"===s?"right":"bottom",a=t.visual.size[s],l=t.visual.margin[s],p=t.visual.padding[s];this.noOpacity||t.style.setProperty("opacity",t.visual.opacity),delete t.visual,t.style.setProperty("x"===s?"width":"height",`${parseFloat(a)}px`),t.style.setProperty(`padding-${i}`,`${parseFloat(p[0])}px`),t.style.setProperty(`padding-${n}`,`${parseFloat(p[1])}px`),t.style.setProperty(`margin-${i}`,`${parseFloat(l[0])}px`),t.style.setProperty(`margin-${n}`,`${parseFloat(l[1])}px`)},collapseElement(t,e="enter"){var r,o;const s=null!=(o=null==(r=this.axis)?void 0:r[e])?o:this.axis,i="x"===s?"width":"height",n="x"===s?"left":"top",a="x"===s?"right":"bottom";this.noOpacity||t.style.setProperty("opacity",0),t.style.setProperty(i,"0px"),t.style.setProperty(`padding-${n}`,"0px"),t.style.setProperty(`padding-${a}`,"0px"),t.style.setProperty(`margin-${n}`,"0px"),t.style.setProperty(`margin-${a}`,"0px")},resetElement(t){t.style.removeProperty("opacity"),t.style.removeProperty("width"),t.style.removeProperty("height"),t.style.removeProperty("padding-top"),t.style.removeProperty("padding-right"),t.style.removeProperty("padding-bottom"),t.style.removeProperty("padding-left"),t.style.removeProperty("margin-top"),t.style.removeProperty("margin-right"),t.style.removeProperty("margin-bottom"),t.style.removeProperty("margin-left")},getSizes(t){const e=getComputedStyle(t),{opacity:r}=e,{width:o,height:s}=e,{paddingTop:i,paddingRight:n,paddingBottom:a,paddingLeft:l}=e,{marginTop:p,marginRight:m,marginBottom:d,marginLeft:y}=e;t.visual={opacity:r,size:{x:o,y:s},padding:{x:[l,n],y:[i,a]},margin:{x:[y,m],y:[p,d]}}}}},[["render",function(t,r,o,s,i,n){return e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.cComponent),e.mergeProps({name:"expand"},t.cAttrs,e.toHandlers(t.cHooks)),{default:e.withCtx((()=>[e.renderSlot(t.$slots,"default")])),_:3},16)}]]);const a=i({name:"transition-fade",mixins:[s],props:{},data:()=>({}),computed:{},methods:{onEnter(t){this.fadeElement(t,"enter"),t.offsetTop,this.setupTransition(t,"enter"),this.$nextTick((()=>t.style.removeProperty("opacity")))},onLeave(t){this.setupTransition(t,"leave"),this.fadeElement(t,"leave")},fadeElement(t,e="enter"){t.style.setProperty("opacity",0)},resetElement(t){t.style.removeProperty("opacity")}}},[["render",function(t,r,o,s,i,n){return e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.cComponent),e.mergeProps({name:"fade"},t.cAttrs,e.toHandlers(t.cHooks)),{default:e.withCtx((()=>[e.renderSlot(t.$slots,"default")])),_:3},16)}]]),l=t=>{const e=t.startsWith("matrix3d")?"matrix3d":"matrix";return[e,"matrix3d"===e?t.slice(9,-1).split(",").map(Number):t.startsWith("matrix")?t.slice(7,-1).split(",").map(Number):[1,0,0,1,0,0]]};const p=i({name:"transition-scale",mixins:[s],props:{axis:{validator:e=>r(e,(e=>t.isString(e)&&["x","y","both"].includes(e))),default:"both"},origin:{validator:e=>r(e,(e=>t.isString(e)&&""!==e.trim())),default:"50% 50%"},scale:{validator:e=>r(e,(e=>t.isNumeric(e)&&e>=0&&e<=1)),default:0}},data:()=>({}),computed:{},methods:{onEnter(t){this.scaleElement(t,"enter"),t.offsetTop,this.setupTransition(t,"enter"),this.$nextTick((()=>{t.style.removeProperty("opacity"),t.style.removeProperty("transform")}))},onLeave(t){this.setupTransition(t,"leave"),this.scaleElement(t,"leave")},scaleElement(e,r="enter"){var o,s,i,n,a,p;const{transform:m}=getComputedStyle(e),d=null!=(s=null==(o=this.axis)?void 0:o[r])?s:this.axis,y=null!=(n=null==(i=this.origin)?void 0:i[r])?n:this.origin,u=t.clamp(1e-4,null!=(p=null==(a=this.scale)?void 0:a[r])?p:this.scale,.9999),[c,h]=l(m);m.startsWith("matrix3d")?("y"!==d&&(h[0]=u),"x"!==d&&(h[5]=u)):m.startsWith("matrix")?("y"!==d&&(h[0]=u),"x"!==d&&(h[3]=u)):(h[0]="y"===d?1:u,h[3]="x"===d?1:u),this.noOpacity||e.style.setProperty("opacity",0),e.style.setProperty("transform",`${c}(${h})`),e.style.setProperty("transform-origin",`${y}`)},resetElement(t){t.style.removeProperty("opacity"),t.style.removeProperty("transform"),t.style.removeProperty("transform-origin")}}},[["render",function(t,r,o,s,i,n){return e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.cComponent),e.mergeProps({name:"scale"},t.cAttrs,e.toHandlers(t.cHooks)),{default:e.withCtx((()=>[e.renderSlot(t.$slots,"default")])),_:3},16)}]]);const m=i({name:"transition-slide",mixins:[s],props:{offset:{validator:e=>r(e,(e=>!!t.isArray(e)&&(2===e.length&&!e.some((e=>!t.isInteger(e)&&(!t.isString(e)||isNaN(Number(e.endsWith("%")?e.slice(0,-1):e)))))))),default:()=>o}},data:()=>({}),computed:{},methods:{onEnter(t){this.slideElement(t,"enter"),t.offsetTop,this.setupTransition(t,"enter"),t.style.removeProperty("opacity"),t.style.removeProperty("transform")},onLeave(t){this.setupTransition(t,"leave"),this.slideElement(t,"leave")},slideElement(e,r="enter"){var o,s;const{width:i,height:n,transform:a}=getComputedStyle(e),p=null!=(s=null==(o=this.offset)?void 0:o[r])?s:this.offset;let[m,d]=p;if(!t.isNumeric(m)){const t=m.endsWith("%")?parseFloat(i)*(parseFloat(m.slice(0,-1))||0)/100:parseFloat(m);m=t}if(!t.isNumeric(d)){const t=d.endsWith("%")?parseFloat(n)*(parseFloat(d.slice(0,-1))||0)/100:parseFloat(d);d=t}const[y,u]=l(a);a.startsWith("matrix3d")?(u[12]+=m,u[13]+=d):a.startsWith("matrix")?(u[4]+=m,u[5]+=d):(u[4]=m,u[5]=d),this.noOpacity||e.style.setProperty("opacity",0),e.style.setProperty("transform",`${y}(${u})`)},resetElement(t){t.style.removeProperty("opacity"),t.style.removeProperty("transform")}}},[["render",function(t,r,o,s,i,n){return e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.cComponent),e.mergeProps({name:"slide"},t.cAttrs,e.toHandlers(t.cHooks)),{default:e.withCtx((()=>[e.renderSlot(t.$slots,"default")])),_:3},16)}]]),d={[n.name]:n,[a.name]:a,[p.name]:p,[m.name]:m},y=(e,r,o)=>{null!=e.props||(e.props={}),e.props[r]={default:t.isArray(o)||t.isObject(o)?()=>o:o}},u=(e,r)=>{var o,s,i;const n=t.kebabCase(e),a=t.pascalCase(e),l=null!=(o=null==r?void 0:r.defaultProps)?o:{},p=null!=(i=null==(s=null==r?void 0:r.componentDefaultProps)?void 0:s[a])?i:{};return Object.entries(l).forEach((([t,e])=>{y(d[n],t,e)})),Object.entries(p).forEach((([t,e])=>{y(d[n],t,e)})),d[n]},c=function(t,e={}){(null==e?void 0:e.components)?Object.entries(e.components).forEach((([r,o])=>{t.component(o,u(r,e))})):Object.keys(d).forEach((r=>{t.component(r,u(r,e))}))};"undefined"!=typeof window&&window.Vue&&window.Vue.use({install:c});const h={install:c};exports.TransitionExpand=n,exports.TransitionFade=a,exports.TransitionScale=p,exports.TransitionSlide=m,exports.default=h,exports.plugin=t=>({install(e,r){c(e,t)}});
